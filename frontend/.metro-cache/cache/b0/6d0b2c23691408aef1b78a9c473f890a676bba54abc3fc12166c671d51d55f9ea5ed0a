{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-webview","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":86},"end":{"line":3,"column":47,"index":133}}],"key":"YJc7i/oIweCWhKjzjfYLEcLeUJA=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/components/LeafletMap.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"LeafletMap\", {\n    enumerable: true,\n    get: function () {\n      return LeafletMap;\n    }\n  });\n  require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[2], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebview = require(_dependencyMap[3], \"react-native-webview\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const LeafletMap = ({\n    vehicles,\n    onMarkerClick,\n    center = [35.3764, 1.3218],\n    zoom = 13\n  }) => {\n    // Generate HTML for Leaflet map\n    const generateMapHTML = () => {\n      const vehiclesJSON = JSON.stringify(vehicles);\n      const centerJSON = JSON.stringify(vehicles && vehicles.length > 0 ? [vehicles[0].lat, vehicles[0].lng] : center);\n      return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />\n  <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n  <script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n  <style>\n    body, html { margin: 0; padding: 0; height: 100%; }\n    #map { height: 100%; width: 100%; }\n  </style>\n</head>\n<body>\n  <div id=\"map\"></div>\n  <script>\n    const vehicles = ${vehiclesJSON};\n    const center = ${centerJSON};\n    \n    // Initialize map\n    const map = L.map('map').setView(center, ${zoom});\n    \n    // Add OpenStreetMap tiles\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Â© OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(map);\n    \n    // Add markers for each vehicle\n    vehicles.forEach(vehicle => {\n      const icon = L.divIcon({\n        className: 'custom-marker',\n        html: \\`<div style=\"\n          background-color: \\${vehicle.color};\n          width: 28px;\n          height: 28px;\n          border-radius: 50%;\n          border: 4px solid white;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.4);\n        \"></div>\\`,\n        iconSize: [28, 28],\n        iconAnchor: [14, 14]\n      });\n      \n      const marker = L.marker([vehicle.lat, vehicle.lng], { icon })\n        .addTo(map)\n        .bindPopup(\\`\n          <div style=\"min-width: 150px; font-family: Arial, sans-serif;\">\n            <strong style=\"font-size: 16px; color: #333;\">\\${vehicle.name}</strong><br/>\n            <span style=\"font-size: 14px; color: #666;\">Vitesse: \\${vehicle.speed.toFixed(0)} km/h</span><br/>\n            <span style=\"font-size: 14px; color: #666;\">Statut: \\${vehicle.status}</span>\n          </div>\n        \\`);\n        \n      marker.on('click', () => {\n        if (window.ReactNativeWebView) {\n          window.ReactNativeWebView.postMessage(JSON.stringify({\n            type: 'markerClick',\n            imei: vehicle.imei\n          }));\n        }\n      });\n    });\n    \n    // Fit bounds to show all vehicles\n    if (vehicles.length > 0) {\n      const bounds = vehicles.map(v => [v.lat, v.lng]);\n      map.fitBounds(bounds, { padding: [50, 50] });\n    }\n  </script>\n</body>\n</html>\n    `;\n    };\n    const handleMessage = event => {\n      try {\n        const data = JSON.parse(event.nativeEvent.data);\n        if (data.type === 'markerClick' && onMarkerClick) {\n          onMarkerClick(data.imei);\n        }\n      } catch (error) {\n        console.error('Error parsing WebView message:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: styles.container,\n      children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNativeWebview.WebView, {\n        source: {\n          html: generateMapHTML()\n        },\n        style: styles.webview,\n        onMessage: handleMessage,\n        javaScriptEnabled: true,\n        domStorageEnabled: true,\n        originWhitelist: ['*']\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }, this);\n  };\n  _c = LeafletMap;\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1\n    },\n    webview: {\n      flex: 1\n    }\n  });\n  var _default = LeafletMap;\n  var _c;\n  $RefreshReg$(_c, \"LeafletMap\");\n});","lineCount":159,"map":[[13,2,141,0,"Object"],[13,8,141,0],[13,9,141,0,"defineProperty"],[13,23,141,0],[13,24,141,0,"exports"],[13,31,141,0],[14,4,141,0,"enumerable"],[14,14,141,0],[15,4,141,0,"get"],[15,7,141,0],[15,18,141,0,"get"],[15,19,141,0],[16,6,141,0],[16,13,141,0,"_default"],[16,21,141,0],[17,4,141,0],[18,2,141,0],[19,2,22,0,"Object"],[19,8,22,0],[19,9,22,0,"defineProperty"],[19,23,22,0],[19,24,22,0,"exports"],[19,31,22,0],[20,4,22,0,"enumerable"],[20,14,22,0],[21,4,22,0,"get"],[21,7,22,0],[21,18,22,0,"get"],[21,19,22,0],[22,6,22,0],[22,13,22,0,"LeafletMap"],[22,23,22,0],[23,4,22,0],[24,2,22,0],[25,2,1,0,"require"],[25,9,1,0],[25,10,1,0,"_dependencyMap"],[25,24,1,0],[26,2,1,26],[26,6,1,26,"_reactNativeWebDistExportsView"],[26,36,1,26],[26,39,1,26,"require"],[26,46,1,26],[26,47,1,26,"_dependencyMap"],[26,61,1,26],[27,2,1,26],[27,6,1,26,"View"],[27,10,1,26],[27,13,1,26,"_interopDefault"],[27,28,1,26],[27,29,1,26,"_reactNativeWebDistExportsView"],[27,59,1,26],[28,2,1,26],[28,6,1,26,"_reactNativeWebDistExportsStyleSheet"],[28,42,1,26],[28,45,1,26,"require"],[28,52,1,26],[28,53,1,26,"_dependencyMap"],[28,67,1,26],[29,2,1,26],[29,6,1,26,"StyleSheet"],[29,16,1,26],[29,19,1,26,"_interopDefault"],[29,34,1,26],[29,35,1,26,"_reactNativeWebDistExportsStyleSheet"],[29,71,1,26],[30,2,3,0],[30,6,3,0,"_reactNativeWebview"],[30,25,3,0],[30,28,3,0,"require"],[30,35,3,0],[30,36,3,0,"_dependencyMap"],[30,50,3,0],[31,2,3,47],[31,6,3,47,"_reactJsxDevRuntime"],[31,25,3,47],[31,28,3,47,"require"],[31,35,3,47],[31,36,3,47,"_dependencyMap"],[31,50,3,47],[32,2,22,7],[32,8,22,13,"LeafletMap"],[32,18,22,50],[32,21,22,53,"LeafletMap"],[32,22,22,54],[33,4,23,2,"vehicles"],[33,12,23,10],[34,4,24,2,"onMarkerClick"],[34,17,24,15],[35,4,25,2,"center"],[35,10,25,8],[35,13,25,11],[35,14,25,12],[35,21,25,19],[35,23,25,21],[35,29,25,27],[35,30,25,28],[36,4,26,2,"zoom"],[36,8,26,6],[36,11,26,9],[37,2,27,0],[37,3,27,1],[37,8,27,6],[38,4,28,2],[39,4,29,2],[39,10,29,8,"generateMapHTML"],[39,25,29,23],[39,28,29,26,"generateMapHTML"],[39,29,29,26],[39,34,29,32],[40,6,30,4],[40,12,30,10,"vehiclesJSON"],[40,24,30,22],[40,27,30,25,"JSON"],[40,31,30,29],[40,32,30,30,"stringify"],[40,41,30,39],[40,42,30,40,"vehicles"],[40,50,30,48],[40,51,30,49],[41,6,31,4],[41,12,31,10,"centerJSON"],[41,22,31,20],[41,25,31,23,"JSON"],[41,29,31,27],[41,30,31,28,"stringify"],[41,39,31,37],[41,40,31,38,"vehicles"],[41,48,31,46],[41,52,31,50,"vehicles"],[41,60,31,58],[41,61,31,59,"length"],[41,67,31,65],[41,70,31,68],[41,71,31,69],[41,74,31,72],[41,75,31,73,"vehicles"],[41,83,31,81],[41,84,31,82],[41,85,31,83],[41,86,31,84],[41,87,31,85,"lat"],[41,90,31,88],[41,92,31,90,"vehicles"],[41,100,31,98],[41,101,31,99],[41,102,31,100],[41,103,31,101],[41,104,31,102,"lng"],[41,107,31,105],[41,108,31,106],[41,111,31,109,"center"],[41,117,31,115],[41,118,31,116],[42,6,33,4],[42,13,33,11],[43,0,34,0],[44,0,35,0],[45,0,36,0],[46,0,37,0],[47,0,38,0],[48,0,39,0],[49,0,40,0],[50,0,41,0],[51,0,42,0],[52,0,43,0],[53,0,44,0],[54,0,45,0],[55,0,46,0],[56,0,47,0],[57,0,48,0],[57,23,48,23,"vehiclesJSON"],[57,35,48,35],[58,0,49,0],[58,21,49,21,"centerJSON"],[58,31,49,31],[59,0,50,0],[60,0,51,0],[61,0,52,0],[61,47,52,47,"zoom"],[61,51,52,51],[62,0,53,0],[63,0,54,0],[64,0,55,0],[65,0,56,0],[66,0,57,0],[67,0,58,0],[68,0,59,0],[69,0,60,0],[70,0,61,0],[71,0,62,0],[72,0,63,0],[73,0,64,0],[74,0,65,0],[75,0,66,0],[76,0,67,0],[77,0,68,0],[78,0,69,0],[79,0,70,0],[80,0,71,0],[81,0,72,0],[82,0,73,0],[83,0,74,0],[84,0,75,0],[85,0,76,0],[86,0,77,0],[87,0,78,0],[88,0,79,0],[89,0,80,0],[90,0,81,0],[91,0,82,0],[92,0,83,0],[93,0,84,0],[94,0,85,0],[95,0,86,0],[96,0,87,0],[97,0,88,0],[98,0,89,0],[99,0,90,0],[100,0,91,0],[101,0,92,0],[102,0,93,0],[103,0,94,0],[104,0,95,0],[105,0,96,0],[106,0,97,0],[107,0,98,0],[108,0,99,0],[109,0,100,0],[110,0,101,0],[111,0,102,0],[112,0,103,0],[113,0,104,0],[113,5,104,5],[114,4,105,2],[114,5,105,3],[115,4,107,2],[115,10,107,8,"handleMessage"],[115,23,107,21],[115,26,107,25,"event"],[115,31,107,35],[115,35,107,40],[116,6,108,4],[116,10,108,8],[117,8,109,6],[117,14,109,12,"data"],[117,18,109,16],[117,21,109,19,"JSON"],[117,25,109,23],[117,26,109,24,"parse"],[117,31,109,29],[117,32,109,30,"event"],[117,37,109,35],[117,38,109,36,"nativeEvent"],[117,49,109,47],[117,50,109,48,"data"],[117,54,109,52],[117,55,109,53],[118,8,110,6],[118,12,110,10,"data"],[118,16,110,14],[118,17,110,15,"type"],[118,21,110,19],[118,26,110,24],[118,39,110,37],[118,43,110,41,"onMarkerClick"],[118,56,110,54],[118,58,110,56],[119,10,111,8,"onMarkerClick"],[119,23,111,21],[119,24,111,22,"data"],[119,28,111,26],[119,29,111,27,"imei"],[119,33,111,31],[119,34,111,32],[120,8,112,6],[121,6,113,4],[121,7,113,5],[121,8,113,6],[121,15,113,13,"error"],[121,20,113,18],[121,22,113,20],[122,8,114,6,"console"],[122,15,114,13],[122,16,114,14,"error"],[122,21,114,19],[122,22,114,20],[122,54,114,52],[122,56,114,54,"error"],[122,61,114,59],[122,62,114,60],[123,6,115,4],[124,4,116,2],[124,5,116,3],[125,4,118,2],[125,24,119,4],[125,28,119,4,"_reactJsxDevRuntime"],[125,47,119,4],[125,48,119,4,"jsxDEV"],[125,54,119,4],[125,56,119,5,"View"],[125,60,119,9],[125,61,119,9,"default"],[125,68,119,9],[126,6,119,10,"style"],[126,11,119,15],[126,13,119,17,"styles"],[126,19,119,23],[126,20,119,24,"container"],[126,29,119,34],[127,6,119,34,"children"],[127,14,119,34],[127,29,120,6],[127,33,120,6,"_reactJsxDevRuntime"],[127,52,120,6],[127,53,120,6,"jsxDEV"],[127,59,120,6],[127,61,120,7,"_reactNativeWebview"],[127,80,120,14],[127,81,120,14,"WebView"],[127,88,120,14],[128,8,121,8,"source"],[128,14,121,14],[128,16,121,16],[129,10,121,18,"html"],[129,14,121,22],[129,16,121,24,"generateMapHTML"],[129,31,121,39],[129,32,121,40],[130,8,121,42],[130,9,121,44],[131,8,122,8,"style"],[131,13,122,13],[131,15,122,15,"styles"],[131,21,122,21],[131,22,122,22,"webview"],[131,29,122,30],[132,8,123,8,"onMessage"],[132,17,123,17],[132,19,123,19,"handleMessage"],[132,32,123,33],[133,8,124,8,"javaScriptEnabled"],[133,25,124,25],[133,27,124,27],[133,31,124,32],[134,8,125,8,"domStorageEnabled"],[134,25,125,25],[134,27,125,27],[134,31,125,32],[135,8,126,8,"originWhitelist"],[135,23,126,23],[135,25,126,25],[135,26,126,26],[135,29,126,29],[136,6,126,31],[137,8,126,31,"fileName"],[137,16,126,31],[137,18,126,31,"_jsxFileName"],[137,30,126,31],[138,8,126,31,"lineNumber"],[138,18,126,31],[139,8,126,31,"columnNumber"],[139,20,126,31],[140,6,126,31],[140,13,127,7],[141,4,127,8],[142,6,127,8,"fileName"],[142,14,127,8],[142,16,127,8,"_jsxFileName"],[142,28,127,8],[143,6,127,8,"lineNumber"],[143,16,127,8],[144,6,127,8,"columnNumber"],[144,18,127,8],[145,4,127,8],[145,11,128,10],[145,12,128,11],[146,2,130,0],[146,3,130,1],[147,2,130,2,"_c"],[147,4,130,2],[147,7,22,13,"LeafletMap"],[147,17,22,50],[148,2,132,0],[148,8,132,6,"styles"],[148,14,132,12],[148,17,132,15,"StyleSheet"],[148,27,132,25],[148,28,132,25,"default"],[148,35,132,25],[148,36,132,26,"create"],[148,42,132,32],[148,43,132,33],[149,4,133,2,"container"],[149,13,133,11],[149,15,133,13],[150,6,134,4,"flex"],[150,10,134,8],[150,12,134,10],[151,4,135,2],[151,5,135,3],[152,4,136,2,"webview"],[152,11,136,9],[152,13,136,11],[153,6,137,4,"flex"],[153,10,137,8],[153,12,137,10],[154,4,138,2],[155,2,139,0],[155,3,139,1],[155,4,139,2],[156,2,141,0],[156,6,141,0,"_default"],[156,14,141,0],[156,17,141,15,"LeafletMap"],[156,27,141,25],[157,2,141,26],[157,6,141,26,"_c"],[157,8,141,26],[158,2,141,26,"$RefreshReg$"],[158,14,141,26],[158,15,141,26,"_c"],[158,17,141,26],[159,0,141,26],[159,3]],"functionMap":{"names":["<global>","LeafletMap","generateMapHTML","handleMessage"],"mappings":"AAA;qDCqB;0BCO;GD4E;wBEE;GFS;CDc"},"hasCjsExports":false},"type":"js/module"}]}
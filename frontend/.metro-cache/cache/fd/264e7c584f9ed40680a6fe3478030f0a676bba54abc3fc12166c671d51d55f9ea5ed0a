{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":58,"index":85}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"react-native-webview","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":86},"end":{"line":3,"column":47,"index":133}}],"key":"YJc7i/oIweCWhKjzjfYLEcLeUJA=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/components/LeafletMap.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"LeafletMap\", {\n    enumerable: true,\n    get: function () {\n      return LeafletMap;\n    }\n  });\n  require(_dependencyMap[0], \"react\");\n  var _reactNative = require(_dependencyMap[1], \"react-native\");\n  var _reactNativeWebview = require(_dependencyMap[2], \"react-native-webview\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  var LeafletMap = _ref => {\n    var vehicles = _ref.vehicles,\n      onMarkerClick = _ref.onMarkerClick,\n      _ref$center = _ref.center,\n      center = _ref$center === void 0 ? [35.3764, 1.3218] : _ref$center,\n      _ref$zoom = _ref.zoom,\n      zoom = _ref$zoom === void 0 ? 13 : _ref$zoom;\n    // Generate HTML for Leaflet map\n    var generateMapHTML = () => {\n      var vehiclesJSON = JSON.stringify(vehicles);\n      var centerJSON = JSON.stringify(vehicles && vehicles.length > 0 ? [vehicles[0].lat, vehicles[0].lng] : center);\n      return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />\n  <link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\" />\n  <script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"></script>\n  <style>\n    body, html { margin: 0; padding: 0; height: 100%; }\n    #map { height: 100%; width: 100%; }\n  </style>\n</head>\n<body>\n  <div id=\"map\"></div>\n  <script>\n    const vehicles = ${vehiclesJSON};\n    const center = ${centerJSON};\n    \n    // Initialize map\n    const map = L.map('map').setView(center, ${zoom});\n    \n    // Add OpenStreetMap tiles\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Â© OpenStreetMap contributors',\n      maxZoom: 19\n    }).addTo(map);\n    \n    // Add markers for each vehicle\n    vehicles.forEach(vehicle => {\n      const icon = L.divIcon({\n        className: 'custom-marker',\n        html: \\`<div style=\"\n          background-color: \\${vehicle.color};\n          width: 28px;\n          height: 28px;\n          border-radius: 50%;\n          border: 4px solid white;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.4);\n        \"></div>\\`,\n        iconSize: [28, 28],\n        iconAnchor: [14, 14]\n      });\n      \n      const marker = L.marker([vehicle.lat, vehicle.lng], { icon })\n        .addTo(map)\n        .bindPopup(\\`\n          <div style=\"min-width: 150px; font-family: Arial, sans-serif;\">\n            <strong style=\"font-size: 16px; color: #333;\">\\${vehicle.name}</strong><br/>\n            <span style=\"font-size: 14px; color: #666;\">Vitesse: \\${vehicle.speed.toFixed(0)} km/h</span><br/>\n            <span style=\"font-size: 14px; color: #666;\">Statut: \\${vehicle.status}</span>\n          </div>\n        \\`);\n        \n      marker.on('click', () => {\n        if (window.ReactNativeWebView) {\n          window.ReactNativeWebView.postMessage(JSON.stringify({\n            type: 'markerClick',\n            imei: vehicle.imei\n          }));\n        }\n      });\n    });\n    \n    // Fit bounds to show all vehicles\n    if (vehicles.length > 0) {\n      const bounds = vehicles.map(v => [v.lat, v.lng]);\n      map.fitBounds(bounds, { padding: [50, 50] });\n    }\n  </script>\n</body>\n</html>\n    `;\n    };\n    var handleMessage = event => {\n      try {\n        var data = JSON.parse(event.nativeEvent.data);\n        if (data.type === 'markerClick' && onMarkerClick) {\n          onMarkerClick(data.imei);\n        }\n      } catch (error) {\n        console.error('Error parsing WebView message:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNative.View, {\n      style: styles.container,\n      children: /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(_reactNativeWebview.WebView, {\n        source: {\n          html: generateMapHTML()\n        },\n        style: styles.webview,\n        onMessage: handleMessage,\n        javaScriptEnabled: true,\n        domStorageEnabled: true,\n        originWhitelist: ['*']\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }, this);\n  };\n  _c = LeafletMap;\n  var styles = _reactNative.StyleSheet.create({\n    container: {\n      flex: 1\n    },\n    webview: {\n      flex: 1\n    }\n  });\n  var _default = LeafletMap;\n  var _c;\n  $RefreshReg$(_c, \"LeafletMap\");\n});","lineCount":152,"map":[[8,2,141,0,"Object"],[8,8,141,0],[8,9,141,0,"defineProperty"],[8,23,141,0],[8,24,141,0,"exports"],[8,31,141,0],[9,4,141,0,"enumerable"],[9,14,141,0],[10,4,141,0,"get"],[10,7,141,0],[10,18,141,0,"get"],[10,19,141,0],[11,6,141,0],[11,13,141,0,"_default"],[11,21,141,0],[12,4,141,0],[13,2,141,0],[14,2,22,0,"Object"],[14,8,22,0],[14,9,22,0,"defineProperty"],[14,23,22,0],[14,24,22,0,"exports"],[14,31,22,0],[15,4,22,0,"enumerable"],[15,14,22,0],[16,4,22,0,"get"],[16,7,22,0],[16,18,22,0,"get"],[16,19,22,0],[17,6,22,0],[17,13,22,0,"LeafletMap"],[17,23,22,0],[18,4,22,0],[19,2,22,0],[20,2,1,0,"require"],[20,9,1,0],[20,10,1,0,"_dependencyMap"],[20,24,1,0],[21,2,2,0],[21,6,2,0,"_reactNative"],[21,18,2,0],[21,21,2,0,"require"],[21,28,2,0],[21,29,2,0,"_dependencyMap"],[21,43,2,0],[22,2,3,0],[22,6,3,0,"_reactNativeWebview"],[22,25,3,0],[22,28,3,0,"require"],[22,35,3,0],[22,36,3,0,"_dependencyMap"],[22,50,3,0],[23,2,3,47],[23,6,3,47,"_reactJsxDevRuntime"],[23,25,3,47],[23,28,3,47,"require"],[23,35,3,47],[23,36,3,47,"_dependencyMap"],[23,50,3,47],[24,2,22,7],[24,6,22,13,"LeafletMap"],[24,16,22,50],[24,19,22,53,"_ref"],[24,23,22,53],[24,27,27,6],[25,4,27,6],[25,8,23,2,"vehicles"],[25,16,23,10],[25,19,23,10,"_ref"],[25,23,23,10],[25,24,23,2,"vehicles"],[25,32,23,10],[26,6,24,2,"onMarkerClick"],[26,19,24,15],[26,22,24,15,"_ref"],[26,26,24,15],[26,27,24,2,"onMarkerClick"],[26,40,24,15],[27,6,24,15,"_ref$center"],[27,17,24,15],[27,20,24,15,"_ref"],[27,24,24,15],[27,25,25,2,"center"],[27,31,25,8],[28,6,25,2,"center"],[28,12,25,8],[28,15,25,8,"_ref$center"],[28,26,25,8],[28,40,25,11],[28,41,25,12],[28,48,25,19],[28,50,25,21],[28,56,25,27],[28,57,25,28],[28,60,25,28,"_ref$center"],[28,71,25,28],[29,6,25,28,"_ref$zoom"],[29,15,25,28],[29,18,25,28,"_ref"],[29,22,25,28],[29,23,26,2,"zoom"],[29,27,26,6],[30,6,26,2,"zoom"],[30,10,26,6],[30,13,26,6,"_ref$zoom"],[30,22,26,6],[30,36,26,9],[30,38,26,11],[30,41,26,11,"_ref$zoom"],[30,50,26,11],[31,4,28,2],[32,4,29,2],[32,8,29,8,"generateMapHTML"],[32,23,29,23],[32,26,29,26,"generateMapHTML"],[32,27,29,26],[32,32,29,32],[33,6,30,4],[33,10,30,10,"vehiclesJSON"],[33,22,30,22],[33,25,30,25,"JSON"],[33,29,30,29],[33,30,30,30,"stringify"],[33,39,30,39],[33,40,30,40,"vehicles"],[33,48,30,48],[33,49,30,49],[34,6,31,4],[34,10,31,10,"centerJSON"],[34,20,31,20],[34,23,31,23,"JSON"],[34,27,31,27],[34,28,31,28,"stringify"],[34,37,31,37],[34,38,31,38,"vehicles"],[34,46,31,46],[34,50,31,50,"vehicles"],[34,58,31,58],[34,59,31,59,"length"],[34,65,31,65],[34,68,31,68],[34,69,31,69],[34,72,31,72],[34,73,31,73,"vehicles"],[34,81,31,81],[34,82,31,82],[34,83,31,83],[34,84,31,84],[34,85,31,85,"lat"],[34,88,31,88],[34,90,31,90,"vehicles"],[34,98,31,98],[34,99,31,99],[34,100,31,100],[34,101,31,101],[34,102,31,102,"lng"],[34,105,31,105],[34,106,31,106],[34,109,31,109,"center"],[34,115,31,115],[34,116,31,116],[35,6,33,4],[35,13,33,11],[36,0,34,0],[37,0,35,0],[38,0,36,0],[39,0,37,0],[40,0,38,0],[41,0,39,0],[42,0,40,0],[43,0,41,0],[44,0,42,0],[45,0,43,0],[46,0,44,0],[47,0,45,0],[48,0,46,0],[49,0,47,0],[50,0,48,0],[50,23,48,23,"vehiclesJSON"],[50,35,48,35],[51,0,49,0],[51,21,49,21,"centerJSON"],[51,31,49,31],[52,0,50,0],[53,0,51,0],[54,0,52,0],[54,47,52,47,"zoom"],[54,51,52,51],[55,0,53,0],[56,0,54,0],[57,0,55,0],[58,0,56,0],[59,0,57,0],[60,0,58,0],[61,0,59,0],[62,0,60,0],[63,0,61,0],[64,0,62,0],[65,0,63,0],[66,0,64,0],[67,0,65,0],[68,0,66,0],[69,0,67,0],[70,0,68,0],[71,0,69,0],[72,0,70,0],[73,0,71,0],[74,0,72,0],[75,0,73,0],[76,0,74,0],[77,0,75,0],[78,0,76,0],[79,0,77,0],[80,0,78,0],[81,0,79,0],[82,0,80,0],[83,0,81,0],[84,0,82,0],[85,0,83,0],[86,0,84,0],[87,0,85,0],[88,0,86,0],[89,0,87,0],[90,0,88,0],[91,0,89,0],[92,0,90,0],[93,0,91,0],[94,0,92,0],[95,0,93,0],[96,0,94,0],[97,0,95,0],[98,0,96,0],[99,0,97,0],[100,0,98,0],[101,0,99,0],[102,0,100,0],[103,0,101,0],[104,0,102,0],[105,0,103,0],[106,0,104,0],[106,5,104,5],[107,4,105,2],[107,5,105,3],[108,4,107,2],[108,8,107,8,"handleMessage"],[108,21,107,21],[108,24,107,25,"event"],[108,29,107,35],[108,33,107,40],[109,6,108,4],[109,10,108,8],[110,8,109,6],[110,12,109,12,"data"],[110,16,109,16],[110,19,109,19,"JSON"],[110,23,109,23],[110,24,109,24,"parse"],[110,29,109,29],[110,30,109,30,"event"],[110,35,109,35],[110,36,109,36,"nativeEvent"],[110,47,109,47],[110,48,109,48,"data"],[110,52,109,52],[110,53,109,53],[111,8,110,6],[111,12,110,10,"data"],[111,16,110,14],[111,17,110,15,"type"],[111,21,110,19],[111,26,110,24],[111,39,110,37],[111,43,110,41,"onMarkerClick"],[111,56,110,54],[111,58,110,56],[112,10,111,8,"onMarkerClick"],[112,23,111,21],[112,24,111,22,"data"],[112,28,111,26],[112,29,111,27,"imei"],[112,33,111,31],[112,34,111,32],[113,8,112,6],[114,6,113,4],[114,7,113,5],[114,8,113,6],[114,15,113,13,"error"],[114,20,113,18],[114,22,113,20],[115,8,114,6,"console"],[115,15,114,13],[115,16,114,14,"error"],[115,21,114,19],[115,22,114,20],[115,54,114,52],[115,56,114,54,"error"],[115,61,114,59],[115,62,114,60],[116,6,115,4],[117,4,116,2],[117,5,116,3],[118,4,118,2],[118,24,119,4],[118,28,119,4,"_reactJsxDevRuntime"],[118,47,119,4],[118,48,119,4,"jsxDEV"],[118,54,119,4],[118,56,119,5,"_reactNative"],[118,68,119,9],[118,69,119,9,"View"],[118,73,119,9],[119,6,119,10,"style"],[119,11,119,15],[119,13,119,17,"styles"],[119,19,119,23],[119,20,119,24,"container"],[119,29,119,34],[120,6,119,34,"children"],[120,14,119,34],[120,29,120,6],[120,33,120,6,"_reactJsxDevRuntime"],[120,52,120,6],[120,53,120,6,"jsxDEV"],[120,59,120,6],[120,61,120,7,"_reactNativeWebview"],[120,80,120,14],[120,81,120,14,"WebView"],[120,88,120,14],[121,8,121,8,"source"],[121,14,121,14],[121,16,121,16],[122,10,121,18,"html"],[122,14,121,22],[122,16,121,24,"generateMapHTML"],[122,31,121,39],[122,32,121,40],[123,8,121,42],[123,9,121,44],[124,8,122,8,"style"],[124,13,122,13],[124,15,122,15,"styles"],[124,21,122,21],[124,22,122,22,"webview"],[124,29,122,30],[125,8,123,8,"onMessage"],[125,17,123,17],[125,19,123,19,"handleMessage"],[125,32,123,33],[126,8,124,8,"javaScriptEnabled"],[126,25,124,25],[126,27,124,27],[126,31,124,32],[127,8,125,8,"domStorageEnabled"],[127,25,125,25],[127,27,125,27],[127,31,125,32],[128,8,126,8,"originWhitelist"],[128,23,126,23],[128,25,126,25],[128,26,126,26],[128,29,126,29],[129,6,126,31],[130,8,126,31,"fileName"],[130,16,126,31],[130,18,126,31,"_jsxFileName"],[130,30,126,31],[131,8,126,31,"lineNumber"],[131,18,126,31],[132,8,126,31,"columnNumber"],[132,20,126,31],[133,6,126,31],[133,13,127,7],[134,4,127,8],[135,6,127,8,"fileName"],[135,14,127,8],[135,16,127,8,"_jsxFileName"],[135,28,127,8],[136,6,127,8,"lineNumber"],[136,16,127,8],[137,6,127,8,"columnNumber"],[137,18,127,8],[138,4,127,8],[138,11,128,10],[138,12,128,11],[139,2,130,0],[139,3,130,1],[140,2,130,2,"_c"],[140,4,130,2],[140,7,22,13,"LeafletMap"],[140,17,22,50],[141,2,132,0],[141,6,132,6,"styles"],[141,12,132,12],[141,15,132,15,"StyleSheet"],[141,27,132,25],[141,28,132,25,"StyleSheet"],[141,38,132,25],[141,39,132,26,"create"],[141,45,132,32],[141,46,132,33],[142,4,133,2,"container"],[142,13,133,11],[142,15,133,13],[143,6,134,4,"flex"],[143,10,134,8],[143,12,134,10],[144,4,135,2],[144,5,135,3],[145,4,136,2,"webview"],[145,11,136,9],[145,13,136,11],[146,6,137,4,"flex"],[146,10,137,8],[146,12,137,10],[147,4,138,2],[148,2,139,0],[148,3,139,1],[148,4,139,2],[149,2,141,0],[149,6,141,0,"_default"],[149,14,141,0],[149,17,141,15,"LeafletMap"],[149,27,141,25],[150,2,141,26],[150,6,141,26,"_c"],[150,8,141,26],[151,2,141,26,"$RefreshReg$"],[151,14,141,26],[151,15,141,26,"_c"],[151,17,141,26],[152,0,141,26],[152,3]],"functionMap":{"names":["<global>","LeafletMap","generateMapHTML","handleMessage"],"mappings":"AAA;qDCqB;0BCO;GD4E;wBEE;GFS;CDc"},"hasCjsExports":false},"type":"js/module"}]}